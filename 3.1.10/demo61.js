var f=(u,p,i)=>new Promise((F,c)=>{var h=s=>{try{d(i.next(s))}catch(_){c(_)}},e=s=>{try{d(i.throw(s))}catch(_){c(_)}},d=s=>s.done?F(s.value):Promise.resolve(s.value).then(h,e);d((i=i.apply(u,p)).next())});import{c as g}from"./mobile.js";import{_ as w}from"./index.js";import{m as v,r as b,e as C,j as l,k as E,g as a,o as U,l as A}from"./vendor.js";const{createDemo:B}=g("uploader"),z=B({setup(){const u="https://my-json-server.typicode.com/linrufeng/demo/posts",p={custom:"test"},i=o=>new Promise(t=>{const n=new FileReader;n.onloadend=m=>t(m.target.result),n.readAsDataURL(o)}),F=o=>new Promise(t=>{const n=new Image;n.onload=()=>t(n),n.src=o}),c=(o,t,n)=>new Promise(m=>o.toBlob(r=>m(r),t,n)),h=o=>{console.log("oversize \u89E6\u53D1 \u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 50kb",o)},e=(o,t)=>{console.log("delete \u4E8B\u4EF6\u89E6\u53D1",o,t)},d=o=>f(this,null,function*(){const t=document.createElement("canvas"),n=t.getContext("2d"),m=yield i(o[0]),r=yield F(m);t.width=r.width,t.height=r.height,n.clearRect(0,0,r.width,r.height),n.drawImage(r,0,0,r.width,r.height);let D=yield c(t,"image/jpeg",.5);return[yield new File([D],o[0].name)]}),s=v(null);return{onOversize:h,beforeUpload:d,onDelete:e,uploadUrl:u,formData:p,uploadRef:s,submitUpload:()=>{s.value.submit()}}}}),k={class:"demo bg-w"},O=a("h2",null,"\u57FA\u7840\u7528\u6CD5",-1),R=a("h2",null,"\u81EA\u5B9A\u4E49\u4E0A\u4F20\u6837\u5F0F",-1),j=A("\u4E0A\u4F20\u6587\u4EF6"),y=a("h2",null,"\u76F4\u63A5\u8C03\u8D77\u6444\u50CF\u5934\uFF08\u79FB\u52A8\u7AEF\u751F\u6548\uFF09",-1),$=a("h2",null,"\u4E0A\u4F20\u72B6\u6001",-1),I=a("h2",null,"\u9650\u5236\u4E0A\u4F20\u6570\u91CF5\u4E2A",-1),L=a("h2",null,"\u9650\u5236\u4E0A\u4F20\u5927\u5C0F\uFF08\u6BCF\u4E2A\u6587\u4EF6\u6700\u5927\u4E0D\u8D85\u8FC7 50kb\uFF09",-1),N=a("h2",null,"\u9650\u5236\u4E0A\u4F20\u5927\u5C0F\uFF08\u5728beforeupload\u94A9\u5B50\u4E2D\u5904\u7406\uFF09",-1),P=a("h2",null,"\u81EA\u5B9A\u4E49\u6570\u636E FormData \u3001 headers ",-1),T=a("h2",null,"\u624B\u52A8\u4E0A\u4F20 ",-1),V=a("br",null,null,-1),S=A("\u6267\u884C\u4E0A\u4F20"),q=a("h2",null,"\u7981\u7528\u72B6\u6001",-1);function G(u,p,i,F,c,h){const e=b("nut-uploader"),d=b("nut-button");return U(),C("div",k,[O,l(e,{url:u.uploadUrl,onStart:u.start},null,8,["url","onStart"]),R,l(e,{url:u.uploadUrl},{default:E(()=>[l(d,{type:"primary",icon:"uploader"},{default:E(()=>[j]),_:1})]),_:1},8,["url"]),y,l(e,{capture:""}),$,l(e,{url:u.uploadUrl,multiple:"",onDelete:u.onDelete},null,8,["url","onDelete"]),I,l(e,{url:u.uploadUrl,multiple:"",maximum:"5"},null,8,["url"]),L,l(e,{url:u.uploadUrl,multiple:"",maximize:1024*50,onOversize:u.onOversize},null,8,["url","onOversize"]),N,l(e,{url:u.uploadUrl,multiple:"","before-upload":u.beforeUpload,maximize:1024*50,onOversize:u.onOversize},null,8,["url","before-upload","onOversize"]),P,l(e,{url:u.uploadUrl,data:u.formData,headers:u.formData,"with-credentials":!0},null,8,["url","data","headers"]),T,l(e,{url:u.uploadUrl,maximum:"5","auto-upload":!1,ref:"uploadRef"},null,8,["url"]),V,l(d,{type:"success",size:"small",onClick:u.submitUpload},{default:E(()=>[S]),_:1},8,["onClick"]),q,l(e,{disabled:""})])}var W=w(z,[["render",G]]);export{W as default};
